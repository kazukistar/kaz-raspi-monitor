<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>GOJA UI Tuner (Single Hex)</title>

  <style>
    /* ===== base ===== */
    :root{
      --bg: #000;
      --card: rgba(18,18,18,.92);
      --stroke: #f2b100;          /* エヴァ寄りの黄 */
      --stroke2: rgba(242,177,0,.55);
      --text: #f2b100;
      --muted: rgba(242,177,0,.75);
      --soft: rgba(255,255,255,.08);

      /* ===== TUNING: 縦位置（ここだけ動かす） ===== */
      --y-title: 0px;
      --y-value: 0px;
      --y-dash:  0px;
      --y-status:0px;
    }

    html,body{
      height: 100%;
      margin: 0;
      background: var(--bg);
      color: #fff;
    }

    body{
      display:flex;
      align-items:flex-start;
      justify-content:center;
      padding: 18px 14px 140px; /* 下にチューナー分 */
      box-sizing: border-box;
    }

    .wrap{
      width: min(520px, 100%);
    }

    /* ===== card ===== */
    .card{
      width: 100%;
      border-radius: 22px;
      background: var(--card);
      box-shadow: 0 10px 40px rgba(0,0,0,.6);
      padding: 18px 14px;
      box-sizing: border-box;
    }

    /* ====== ここだけ修正：正六角形の比率 (W:H = 2:√3 = 1.154700...) ====== */
    .hexStage{
      position: relative;
      width: 100%;
      aspect-ratio: 1.1547005 / 1; /* ← 正六角形が潰れない */
      max-height: 360px;
      display:flex;
      align-items:center;
      justify-content:center;
    }

    /* SVG（正六角形） */
    svg.hex{
      width: 100%;
      height: 100%;
      display:block;
    }

    .hexOuter{ stroke: var(--stroke); stroke-width: 3.6; fill: none; }
    .hexInner{ stroke: var(--stroke2); stroke-width: 2.2; fill: none; }

    /* ===== content (触るのは縦位置だけ) ===== */
    .overlay{
      position:absolute;
      inset: 0;
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:center;
      pointer-events:none;
    }

    /* 題目：日本語は明朝太字寄せ */
    .metric-title{
      transform: translateY(var(--y-title));
      font-family:
        "Hiragino Mincho ProN","Yu Mincho","Noto Serif JP",
        "Times New Roman",serif;
      font-weight: 800;
      letter-spacing: .06em;
      font-size: clamp(18px, 4.2vw, 26px);
      color: var(--text);
      text-shadow: 0 0 18px rgba(242,177,0,.12);
      margin-bottom: 10px;
    }

    /* 数字：デジタル寄せ */
    .metric-value{
      transform: translateY(var(--y-value));
      display:flex;
      align-items:baseline;
      gap: 10px;
      color: var(--text);
      text-shadow: 0 0 26px rgba(242,177,0,.14);
      margin: 0;
    }

    .metric-value .val{
      font-family:
        "DS-Digital","Digital-7","Orbitron","Share Tech Mono",
        ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;
      font-weight: 700;
      font-size: clamp(72px, 16vw, 120px);
      line-height: 1;
    }

    .metric-value .unit{
      font-family:
        "DS-Digital","Digital-7","Orbitron","Share Tech Mono",
        ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;
      font-weight: 600;
      font-size: clamp(16px, 4.2vw, 24px);
      opacity: .7;
      transform: translateY(6px);
    }

    /* 点線：短めに */
    .metric-dash{
      transform: translateY(var(--y-dash));
      width: 62%;
      border-bottom: 3px dashed rgba(242,177,0,.45);
      margin-top: 16px;
      margin-bottom: 14px;
    }

    /* 稼働状態 */
    .metric-status{
      transform: translateY(var(--y-status));
      font-family:
        "Hiragino Mincho ProN","Yu Mincho","Noto Serif JP",
        "Times New Roman",serif;
      font-weight: 800;
      letter-spacing: .08em;
      font-size: clamp(14px, 3.6vw, 20px);
      color: var(--muted);
      margin-top: 4px;
    }

    /* ===== tuner UI ===== */
    #tuner{
      position: fixed;
      left: 10px; right: 10px; bottom: 10px;
      background: rgba(0,0,0,.86);
      border: 1px solid rgba(255,255,255,.14);
      border-radius: 16px;
      padding: 12px;
      z-index: 9999;
      color: #fff;
      font-family: system-ui, -apple-system, sans-serif;
      backdrop-filter: blur(8px);
    }
    #tuner.hidden{ display:none; }
    #tuner label{
      display:block;
      margin: 10px 0;
      font-size: 12px;
      opacity: .95;
    }
    #tuner input[type="range"]{
      width: 100%;
      margin-top: 6px;
    }
    .tunerHead{
      display:flex; align-items:center; justify-content:space-between;
      margin-bottom: 6px;
      font-size: 13px;
    }
    .tunerHead button, .tunerBtns button{
      border: 1px solid rgba(255,255,255,.2);
      background: rgba(255,255,255,.08);
      color:#fff;
      padding: 8px 10px;
      border-radius: 12px;
      font-size: 12px;
    }
    .tunerBtns{
      display:flex; gap:10px;
      margin-top: 8px;
    }
    .tunerBtns button{ flex:1; }

    @supports(padding: max(0px)){
      #tuner{ bottom: max(10px, env(safe-area-inset-bottom)); }
      body{ padding-bottom: calc(140px + env(safe-area-inset-bottom)); }
    }
  </style>
</head>

<body>
  <div class="wrap">
    <div class="card">
      <div class="hexStage">
        <!-- ====== ここだけ修正：数学的に正しい「正六角形」 ======
             viewBoxは幅200、高さは 100*√3 = 173.205...
             これで「潰れない正六角形」になる
        -->
        <svg class="hex" viewBox="0 0 200 173.205" preserveAspectRatio="xMidYMid meet" aria-hidden="true">
          <!-- 外枠（R=100, center=(100,86.6025)） -->
          <polygon class="hexOuter"
            points="
              200,86.602
              150,173.205
              50,173.205
              0,86.602
              50,0
              150,0
            ">
          </polygon>

          <!-- 内枠（R=82, 同中心） -->
          <polygon class="hexInner"
            points="
              182,86.602
              141,157.660
              59,157.660
              18,86.602
              59,15.545
              141,15.545
            ">
          </polygon>
        </svg>

        <div class="overlay">
          <div class="metric-title">メモリ稼働率</div>

          <div class="metric-value">
            <span class="val">60</span>
            <span class="unit">%</span>
          </div>

          <div class="metric-dash"></div>

          <div class="metric-status">稼働状態：通常</div>
        </div>
      </div>
    </div>
  </div>

  <div id="tuner">
    <div class="tunerHead">
      <div>位置調整（縦だけ）</div>
      <button id="tunerToggle" type="button">HIDE</button>
    </div>

    <label>題目Y <span id="vTitle">0</span>px
      <input id="sTitle" type="range" min="-120" max="120" value="0">
    </label>

    <label>数字Y <span id="vValue">0</span>px
      <input id="sValue" type="range" min="-160" max="160" value="0">
    </label>

    <label>点線Y <span id="vDash">0</span>px
      <input id="sDash" type="range" min="-160" max="160" value="0">
    </label>

    <label>稼働状態Y <span id="vStatus">0</span>px
      <input id="sStatus" type="range" min="-160" max="160" value="0">
    </label>

    <div class="tunerBtns">
      <button id="copyPos" type="button">COPY</button>
      <button id="resetPos" type="button">RESET</button>
    </div>
  </div>

  <script>
  (() => {
    const keys = ["title","value","dash","status"];
    const $ = (id) => document.getElementById(id);

    const sliders = {
      title: $("sTitle"),
      value: $("sValue"),
      dash:  $("sDash"),
      status:$("sStatus"),
    };
    const labels = {
      title: $("vTitle"),
      value: $("vValue"),
      dash:  $("vDash"),
      status:$("vStatus"),
    };

    const saved = JSON.parse(localStorage.getItem("goja_pos") || "{}");
    keys.forEach(k => {
      const v = (saved[k] ?? 0);
      sliders[k].value = v;
      labels[k].textContent = v;
      document.documentElement.style.setProperty(`--y-${k}`, `${v}px`);
    });

    keys.forEach(k => {
      sliders[k].addEventListener("input", () => {
        const v = parseInt(sliders[k].value, 10) || 0;
        labels[k].textContent = v;
        document.documentElement.style.setProperty(`--y-${k}`, `${v}px`);

        const cur = JSON.parse(localStorage.getItem("goja_pos") || "{}");
        cur[k] = v;
        localStorage.setItem("goja_pos", JSON.stringify(cur));
      });
    });

    $("tunerToggle").addEventListener("click", () => {
      const t = $("tuner");
      if (t.classList.contains("hidden")) {
        t.classList.remove("hidden");
        $("tunerToggle").textContent = "HIDE";
      } else {
        t.classList.add("hidden");
        $("tunerToggle").textContent = "SHOW";
      }
    });

    $("copyPos").addEventListener("click", async () => {
      const cur = JSON.parse(localStorage.getItem("goja_pos") || "{}");
      const text = JSON.stringify({
        y_title:  cur.title ?? 0,
        y_value:  cur.value ?? 0,
        y_dash:   cur.dash  ?? 0,
        y_status: cur.status?? 0,
      }, null, 2);

      try{
        await navigator.clipboard.writeText(text);
        $("copyPos").textContent = "COPIED";
        setTimeout(()=> $("copyPos").textContent="COPY", 900);
      }catch(e){
        alert(text);
      }
    });

    $("resetPos").addEventListener("click", () => {
      localStorage.removeItem("goja_pos");
      keys.forEach(k => {
        sliders[k].value = 0;
        labels[k].textContent = 0;
        document.documentElement.style.setProperty(`--y-${k}`, `0px`);
      });
    });
  })();
  </script>
</body>
</html>