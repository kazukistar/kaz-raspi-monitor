<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1, viewport-fit=cover" />
  <title>KAZ-RASPI / 監視モニタ</title>

  <!-- Free fonts (Google Fonts) -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto+Condensed:wght@400;700&family=Share+Tech+Mono&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg0:#04060a;
      --bg1:#060a10;

      --text:#ffd38a;
      --muted:rgba(255, 211, 138, .68);

      --ok:#ffb343;
      --caution:#ff5a2b;
      --warn:#ff1b1b;

      --line:rgba(255, 180, 40, .60);
      --line2:rgba(255, 180, 40, .22);
      --glow:rgba(255, 170, 40, .14);

      --pad:14px;
      --gap:14px;
    }

    *{ box-sizing:border-box; }
    html,body{
      width:100%;
      height:100%;
      margin:0;
      background:
        radial-gradient(1200px 700px at 20% 10%, rgba(255,170,40,.10), transparent 62%),
        radial-gradient(1000px 600px at 80% 80%, rgba(255,27,27,.06), transparent 60%),
        linear-gradient(180deg, var(--bg0), var(--bg1));
      color:var(--text);
      overflow:hidden;
    }

    .font-label{ font-family:"Roboto Condensed", system-ui, sans-serif; }
    .font-mono { font-family:"Share Tech Mono", ui-monospace, SFMono-Regular, Menlo, Consolas, monospace; }

    /* ===== Frame (portrait + scroll OK) ===== */
    .frame{
      height:100%;
      width:100%;
      padding:
        calc(var(--pad) + env(safe-area-inset-top))
        calc(var(--pad) + env(safe-area-inset-right))
        calc(var(--pad) + env(safe-area-inset-bottom))
        calc(var(--pad) + env(safe-area-inset-left));
      display:flex;
      flex-direction:column;
      gap:var(--gap);
      overflow:auto;
    }

    /* ===== Header ===== */
    .header{
      position:relative;
      border:1px solid var(--line2);
      background: linear-gradient(90deg, rgba(255,180,40,.12), rgba(255,180,40,.02));
      padding:10px 12px;
      display:grid;
      grid-template-columns: 1.3fr 1fr 1fr;
      gap:10px;
      align-items:center;
      box-shadow: 0 0 22px rgba(255,170,40,.10);
    }
    .header::before{
      content:"";
      position:absolute;
      inset:-2px;
      border:1px solid rgba(255,180,40,.14);
      pointer-events:none;
    }
    .hblock{ display:flex; flex-direction:column; gap:4px; }
    .hlabel{
      font-size:12px;
      letter-spacing:.18em;
      text-transform:uppercase;
      color:var(--muted);
    }
    .hvalue{
      font-size:18px;
      letter-spacing:.10em;
      text-transform:uppercase;
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
    }
    .statusPill{
      justify-self:center;
      display:inline-flex;
      align-items:center;
      gap:10px;
      padding:6px 10px;
      border:1px solid rgba(255,180,40,.55);
      background: rgba(255,180,40,.06);
      box-shadow: 0 0 18px rgba(255,170,40,.10);
    }
    .dot{
      width:10px; height:10px; border-radius:50%;
      background:var(--ok);
      box-shadow: 0 0 14px rgba(255,170,40,.22);
    }

    /* ===== Content layout ===== */
    .grid{
      display:flex;
      flex-direction:column;
      gap:var(--gap);
    }
    .row2{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:var(--gap);
    }
    @media (max-width: 420px){
      .row2{ grid-template-columns: 1fr; }
    }

    /* =========================================================
       HEX UNIT (regular hexagon by SVG background)
       - Container is a square, hex is inscribed inside.
       - Content is placed in "safe area" (center rectangle) so it never leaks.
       ========================================================= */
    .hexUnit{
      position:relative;
      width:100%;
      display:grid;
      place-items:center;
      /* fixed-ish height that scales with screen */
      height: clamp(170px, 28vh, 260px);
      filter: drop-shadow(0 0 10px rgba(255,170,40,.10));
    }
    .hexUnit.sm{ height: clamp(160px, 24vh, 220px); }
    .hexUnit.lg{ height: clamp(220px, 34vh, 320px); }

    /* SVG hex "plate" */
    .hexSvg{
      position:absolute;
      inset:0;
      width:100%;
      height:100%;
      pointer-events:none;
    }

    /* Safe content area inside a regular hex:
       - we keep content in centered rectangle (approx 70% width, 62% height)
       - this guarantees no clipping regardless of font size.
    */
    .hexBody{
      position:relative;
      width: 70%;
      height: 62%;
      display:flex;
      flex-direction:column;
      justify-content:center;
      gap:10px;
      overflow:hidden;
    }

    .tag{
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:10px;
      font-size:12px;
      letter-spacing:.16em;
      color:var(--muted);
      text-transform:uppercase;
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
    }
    .mode{
      flex:0 0 auto;
      padding:2px 7px;
      border:1px solid rgba(255,180,40,.30);
      background: rgba(255,180,40,.05);
    }
    .title{
      font-size:13px;
      letter-spacing:.22em;
      text-transform:uppercase;
      color:rgba(255,211,138,.80);
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
    }

    /* Numbers always fit: clamp + ellipsis */
    .big{
      font-size: clamp(30px, 8.5vw, 54px);
      letter-spacing:.06em;
      line-height:1.0;
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
      text-shadow: 0 0 22px rgba(255,170,40,.14);
    }
    .hexUnit.lg .big{
      font-size: clamp(40px, 11vw, 72px);
    }
    .unit{
      font-size:.50em;
      opacity:.9;
      margin-left:6px;
    }

    .sub{
      display:flex;
      flex-wrap:wrap;
      gap:10px;
      font-size:12px;
      letter-spacing:.10em;
      color:var(--muted);
      overflow:hidden;
    }
    .sub b{ color:var(--text); font-weight:700; }

    /* Storage bars */
    .barWrap{ display:flex; flex-direction:column; gap:8px; }
    .bar{
      height:10px;
      border:1px solid rgba(255,180,40,.28);
      background: rgba(255,180,40,.05);
      position:relative;
      overflow:hidden;
    }
    .bar > i{
      position:absolute; inset:0;
      width:40%;
      background: linear-gradient(90deg, rgba(255,180,40,.78), rgba(255,180,40,.24));
      display:block;
    }
    .bar > i::after{
      content:"";
      position:absolute; top:0; right:-18px;
      width:18px; height:100%;
      background: rgba(255,180,40,.55);
      clip-path: polygon(0 0, 100% 0, 0 100%);
      opacity:.6;
    }
    .monoLine{
      font-size:12px;
      letter-spacing:.10em;
      white-space:pre;
      color:rgba(255,211,138,.85);
      overflow:hidden;
      text-overflow:ellipsis;
    }

    /* Services log */
    .svc{
      border-top:1px dashed rgba(255,180,40,.22);
      padding-top:10px;
      display:flex;
      flex-direction:column;
      gap:8px;
      font-size:12px;
      letter-spacing:.10em;
      color:rgba(255,211,138,.85);
    }
    .svcLine{
      display:grid;
      grid-template-columns: 1fr auto;
      gap:10px;
      align-items:center;
    }
    .svcName{
      overflow:hidden;
      text-overflow:ellipsis;
      text-transform:uppercase;
      white-space:nowrap;
    }
    .svcState{
      padding:2px 8px;
      border:1px solid rgba(255,180,40,.26);
      background: rgba(255,180,40,.05);
      text-transform:uppercase;
      white-space:nowrap;
    }

    /* ===== Severity (changes stroke + subtle glow) ===== */
    .sev-ok   { --stroke: rgba(255,180,40,.62); --stroke2: rgba(255,180,40,.18); --fill1: rgba(255,180,40,.10); --fill2: rgba(255,180,40,.02); }
    .sev-caution{ --stroke: rgba(255,90,43,.74);  --stroke2: rgba(255,90,43,.18);  --fill1: rgba(255,90,43,.12);  --fill2: rgba(255,90,43,.02); }
    .sev-warn { --stroke: rgba(255,27,27,.86);   --stroke2: rgba(255,27,27,.20);   --fill1: rgba(255,27,27,.16);   --fill2: rgba(255,27,27,.02); }

    .sev-warn{ animation: pulse 1.15s ease-in-out infinite; }
    @keyframes pulse{
      0%,100%{ filter: drop-shadow(0 0 12px rgba(255,27,27,.10)); }
      50%{ filter: drop-shadow(0 0 26px rgba(255,27,27,.20)); }
    }

    /* OFFLINE overlay */
    .offlineOverlay{
      display:none;
      position:fixed;
      inset:0;
      background: rgba(0,0,0,.80);
      backdrop-filter: blur(2px);
      z-index:50;
      align-items:center;
      justify-content:center;
      color:#ff2a2a;
      text-align:center;
      padding:24px;
    }
    .offlineOverlay .box{
      border:2px solid rgba(255,27,27,.86);
      padding:22px 22px;
      background: rgba(255,27,27,.08);
      box-shadow: 0 0 40px rgba(255,27,27,.16);
      letter-spacing:.20em;
      text-transform:uppercase;
      max-width: 560px;
      width:100%;
    }
    .offlineOverlay .box .jp{
      font-size:18px;
      margin-bottom:10px;
    }
    .offlineOverlay .box .en{
      font-size:44px;
      line-height:1;
    }
  </style>
</head>

<body>
  <div class="frame">

    <!-- Header -->
    <div class="header">
      <div class="hblock">
        <div class="hlabel font-label">監視対象 / TARGET</div>
        <div class="hvalue font-label" id="hostName">KAZ-RASPI</div>
      </div>

      <div class="statusPill">
        <span class="dot" id="onlineDot"></span>
        <span class="hvalue font-label" id="onlineText">稼働 / ONLINE</span>
      </div>

      <div class="hblock" style="justify-self:end; text-align:right;">
        <div class="hlabel font-label">更新 / UPDATE</div>
        <div class="hvalue font-mono"><span id="updateAge">1.0</span> s</div>
      </div>
    </div>

    <div class="grid">

      <!-- TEMP (large) -->
      <section class="hexUnit lg sev-ok" id="tempHex">
        <svg class="hexSvg" viewBox="0 0 100 100" preserveAspectRatio="none">
          <!-- Regular hex points: (50,2) (93,25) (93,75) (50,98) (7,75) (7,25) -->
          <defs>
            <linearGradient id="gFillTemp" x1="0" y1="0" x2="0" y2="1">
              <stop offset="0" stop-color="var(--fill1)"/>
              <stop offset="1" stop-color="var(--fill2)"/>
            </linearGradient>
          </defs>
          <polygon points="50,2 93,25 93,75 50,98 7,75 7,25" fill="url(#gFillTemp)" stroke="var(--stroke)" stroke-width="1.6"/>
          <polygon points="50,6 89,27.5 89,72.5 50,94 11,72.5 11,27.5" fill="none" stroke="var(--stroke2)" stroke-width="1"/>
        </svg>

        <div class="hexBody">
          <div class="tag font-label">
            <span>温度 / TEMP</span>
            <span class="mode font-label">CPU</span>
          </div>
          <div class="title font-label">CPU 温度 / CPU TEMP</div>
          <div class="big font-mono"><span id="cpuTemp">58.2</span><span class="unit">℃</span></div>
          <div class="sub font-label">
            <span>判定 <b id="tempState">正常</b> / <span id="tempStateEn">NORMAL</span></span>
            <span>しきい値 <b>60</b> / <b>75</b> ℃</span>
          </div>
        </div>
      </section>

      <!-- CPU / RAM -->
      <div class="row2">
        <section class="hexUnit sm sev-ok" id="cpuHex">
          <svg class="hexSvg" viewBox="0 0 100 100" preserveAspectRatio="none">
            <defs>
              <linearGradient id="gFillCPU" x1="0" y1="0" x2="0" y2="1">
                <stop offset="0" stop-color="var(--fill1)"/>
                <stop offset="1" stop-color="var(--fill2)"/>
              </linearGradient>
            </defs>
            <polygon points="50,2 93,25 93,75 50,98 7,75 7,25" fill="url(#gFillCPU)" stroke="var(--stroke)" stroke-width="1.6"/>
            <polygon points="50,6 89,27.5 89,72.5 50,94 11,72.5 11,27.5" fill="none" stroke="var(--stroke2)" stroke-width="1"/>
          </svg>
          <div class="hexBody">
            <div class="tag font-label">
              <span>CPU 使用率</span>
              <span class="mode">UTIL</span>
            </div>
            <div class="title font-label">CPU / PROCESSOR</div>
            <div class="big font-mono"><span id="cpuUtil">41</span><span class="unit">%</span></div>
            <div class="sub font-label">
              <span>状態 <b id="cpuState">正常</b> / <span id="cpuStateEn">NORMAL</span></span>
            </div>
          </div>
        </section>

        <section class="hexUnit sm sev-ok" id="ramHex">
          <svg class="hexSvg" viewBox="0 0 100 100" preserveAspectRatio="none">
            <defs>
              <linearGradient id="gFillRAM" x1="0" y1="0" x2="0" y2="1">
                <stop offset="0" stop-color="var(--fill1)"/>
                <stop offset="1" stop-color="var(--fill2)"/>
              </linearGradient>
            </defs>
            <polygon points="50,2 93,25 93,75 50,98 7,75 7,25" fill="url(#gFillRAM)" stroke="var(--stroke)" stroke-width="1.6"/>
            <polygon points="50,6 89,27.5 89,72.5 50,94 11,72.5 11,27.5" fill="none" stroke="var(--stroke2)" stroke-width="1"/>
          </svg>
          <div class="hexBody">
            <div class="tag font-label">
              <span>メモリ 使用率</span>
              <span class="mode">MEM</span>
            </div>
            <div class="title font-label">メモリ / MEMORY</div>
            <div class="big font-mono"><span id="ramUtil">63</span><span class="unit">%</span></div>
            <div class="sub font-label">
              <span>使用 <b id="ramUsed">2.6</b> / <span id="ramTotal">4.0</span> GB</span>
            </div>
          </div>
        </section>
      </div>

      <!-- LOAD / SERVICES -->
      <div class="row2">
        <section class="hexUnit sm sev-ok" id="loadHex">
          <svg class="hexSvg" viewBox="0 0 100 100" preserveAspectRatio="none">
            <defs>
              <linearGradient id="gFillLOAD" x1="0" y1="0" x2="0" y2="1">
                <stop offset="0" stop-color="var(--fill1)"/>
                <stop offset="1" stop-color="var(--fill2)"/>
              </linearGradient>
            </defs>
            <polygon points="50,2 93,25 93,75 50,98 7,75 7,25" fill="url(#gFillLOAD)" stroke="var(--stroke)" stroke-width="1.6"/>
            <polygon points="50,6 89,27.5 89,72.5 50,94 11,72.5 11,27.5" fill="none" stroke="var(--stroke2)" stroke-width="1"/>
          </svg>
          <div class="hexBody">
            <div class="tag font-label">
              <span>負荷 / LOAD</span>
              <span class="mode">AVG</span>
            </div>
            <div class="title font-label">ロードアベレージ / LOAD AVG</div>
            <div class="big font-mono"><span id="loadAvg">0.74</span></div>
            <div class="sub font-label">
              <span>稼働時間 <b id="uptime">12:34:56</b></span>
            </div>
          </div>
        </section>

        <section class="hexUnit sm sev-ok" id="svcHex">
          <svg class="hexSvg" viewBox="0 0 100 100" preserveAspectRatio="none">
            <defs>
              <linearGradient id="gFillSVC" x1="0" y1="0" x2="0" y2="1">
                <stop offset="0" stop-color="var(--fill1)"/>
                <stop offset="1" stop-color="var(--fill2)"/>
              </linearGradient>
            </defs>
            <polygon points="50,2 93,25 93,75 50,98 7,75 7,25" fill="url(#gFillSVC)" stroke="var(--stroke)" stroke-width="1.6"/>
            <polygon points="50,6 89,27.5 89,72.5 50,94 11,72.5 11,27.5" fill="none" stroke="var(--stroke2)" stroke-width="1"/>
          </svg>
          <div class="hexBody">
            <div class="tag font-label">
              <span>サービス監視 / SERVICES</span>
              <span class="mode">UNIT</span>
            </div>
            <div class="title font-label">稼働状況 / SERVICE STATUS</div>

            <div class="svc font-mono">
              <div class="svcLine">
                <div class="svcName">GOJA-DENPO-SERVER</div>
                <div class="svcState" id="svcDenpo">稼働中...</div>
              </div>
              <div class="svcLine">
                <div class="svcName">GOJA-CLOUD-SERVER</div>
                <div class="svcState" id="svcCloud">稼働中...</div>
              </div>
            </div>
          </div>
        </section>
      </div>

      <!-- SD / HDD -->
      <div class="row2">
        <section class="hexUnit sm sev-ok" id="sdHex">
          <svg class="hexSvg" viewBox="0 0 100 100" preserveAspectRatio="none">
            <defs>
              <linearGradient id="gFillSD" x1="0" y1="0" x2="0" y2="1">
                <stop offset="0" stop-color="var(--fill1)"/>
                <stop offset="1" stop-color="var(--fill2)"/>
              </linearGradient>
            </defs>
            <polygon points="50,2 93,25 93,75 50,98 7,75 7,25" fill="url(#gFillSD)" stroke="var(--stroke)" stroke-width="1.6"/>
            <polygon points="50,6 89,27.5 89,72.5 50,94 11,72.5 11,27.5" fill="none" stroke="var(--stroke2)" stroke-width="1"/>
          </svg>
          <div class="hexBody">
            <div class="tag font-label">
              <span>内部 記憶 / INTERNAL</span>
              <span class="mode">SD</span>
            </div>
            <div class="title font-label">SDカード / SD CARD</div>

            <div class="barWrap">
              <div class="bar"><i id="sdBar" style="width:31%"></i></div>
            </div>
            <div class="monoLine font-mono" id="sdText">USED 18.3 / 58.3 GB (31%)</div>
          </div>
        </section>

        <section class="hexUnit sm sev-ok" id="hddHex">
          <svg class="hexSvg" viewBox="0 0 100 100" preserveAspectRatio="none">
            <defs>
              <linearGradient id="gFillHDD" x1="0" y1="0" x2="0" y2="1">
                <stop offset="0" stop-color="var(--fill1)"/>
                <stop offset="1" stop-color="var(--fill2)"/>
              </linearGradient>
            </defs>
            <polygon points="50,2 93,25 93,75 50,98 7,75 7,25" fill="url(#gFillHDD)" stroke="var(--stroke)" stroke-width="1.6"/>
            <polygon points="50,6 89,27.5 89,72.5 50,94 11,72.5 11,27.5" fill="none" stroke="var(--stroke2)" stroke-width="1"/>
          </svg>
          <div class="hexBody">
            <div class="tag font-label">
              <span>外部 記憶 / EXTERNAL</span>
              <span class="mode">HDD</span>
            </div>
            <div class="title font-label">外部HDD-01 / EXT HDD-01</div>

            <div class="barWrap">
              <div class="bar"><i id="hddBar" style="width:21%"></i></div>
            </div>
            <div class="monoLine font-mono" id="hddText">USED 212 / 1000 GB (21%)</div>
          </div>
        </section>
      </div>

    </div>
  </div>

  <!-- OFFLINE overlay -->
  <div class="offlineOverlay" id="offline">
    <div class="box font-label">
      <div class="jp">通信断 / OFFLINE</div>
      <div class="en font-mono">NO SIGNAL</div>
    </div>
  </div>

  <script>
    // ===== Dummy data generator (UI-only phase) =====
    const el = (id) => document.getElementById(id);

    const tempHex = el("tempHex");
    const cpuHex  = el("cpuHex");
    const ramHex  = el("ramHex");
    const svcHex  = el("svcHex");
    const sdHex   = el("sdHex");
    const hddHex  = el("hddHex");

    const onlineDot = el("onlineDot");
    const onlineText = el("onlineText");
    const offline = el("offline");

    let lastTick = performance.now();
    let online = true;
    let uptimeSec = 0;

    function clamp(v, a, b){ return Math.max(a, Math.min(b, v)); }

    function setSeverity(node, sev){
      node.classList.remove("sev-ok","sev-caution","sev-warn");
      node.classList.add(sev === "warn" ? "sev-warn" : sev === "caution" ? "sev-caution" : "sev-ok");
    }

    function tempState(t){
      if(t >= 75) return {jp:"警戒", en:"EMERGENCY", sev:"warn"};
      if(t >= 60) return {jp:"注意", en:"CAUTION", sev:"caution"};
      return {jp:"正常", en:"NORMAL", sev:"ok"};
    }

    function percentState(p){
      if(p >= 90) return {jp:"警戒", en:"EMERGENCY", sev:"warn"};
      if(p >= 75) return {jp:"注意", en:"CAUTION", sev:"caution"};
      return {jp:"正常", en:"NORMAL", sev:"ok"};
    }

    function storageState(p){
      if(p >= 90) return {sev:"warn"};
      if(p >= 80) return {sev:"caution"};
      return {sev:"ok"};
    }

    function formatUptime(sec){
      sec = Math.max(0, Math.floor(sec));
      const h = String(Math.floor(sec/3600)).padStart(2,'0');
      const m = String(Math.floor((sec%3600)/60)).padStart(2,'0');
      const s = String(sec%60).padStart(2,'0');
      return `${h}:${m}:${s}`;
    }

    const services = {
      denpo: {state:"active", label:"稼働中..."},
      cloud: {state:"active", label:"稼働中..."},
    };

    function serviceLabel(st){
      if(st === "active") return "稼働中...";
      if(st === "restarting") return "再起動中...";
      return "停止";
    }

    function maybeFlipServices(){
      const r = Math.random();
      if(r < 0.03) services.denpo.state = "restarting";
      else if(r < 0.04) services.denpo.state = "inactive";
      else if(r < 0.07) services.denpo.state = "active";

      const c = Math.random();
      if(c < 0.02) services.cloud.state = "restarting";
      else if(c < 0.03) services.cloud.state = "inactive";
      else if(c < 0.06) services.cloud.state = "active";

      services.denpo.label = serviceLabel(services.denpo.state);
      services.cloud.label = serviceLabel(services.cloud.state);
    }

    function tick(){
      const now = performance.now();
      const dt = (now - lastTick) / 1000;
      lastTick = now;

      if(Math.random() < 0.006) online = !online;

      offline.style.display = online ? "none" : "flex";
      onlineDot.style.background = online ? "var(--ok)" : "var(--warn)";
      onlineText.textContent = online ? "稼働 / ONLINE" : "停止 / OFFLINE";
      el("updateAge").textContent = online ? "1.0" : "—";

      if(!online){
        requestAnimationFrame(tick);
        return;
      }

      uptimeSec += dt;
      el("uptime").textContent = formatUptime(uptimeSec);

      // temp
      const t = clamp(55 + (Math.random()*18 - 9) + Math.sin(uptimeSec/7)*6, 42, 84);
      el("cpuTemp").textContent = t.toFixed(1);
      const ts = tempState(t);
      el("tempState").textContent = ts.jp;
      el("tempStateEn").textContent = ts.en;
      setSeverity(tempHex, ts.sev);

      // cpu util
      const cpu = clamp(35 + (Math.random()*40 - 20) + (t-55)*1.2, 2, 98);
      el("cpuUtil").textContent = Math.round(cpu);
      const cs = percentState(cpu);
      el("cpuState").textContent = cs.jp;
      el("cpuStateEn").textContent = cs.en;
      setSeverity(cpuHex, cs.sev);

      // ram util
      const ram = clamp(55 + (Math.random()*30 - 15), 10, 95);
      el("ramUtil").textContent = Math.round(ram);
      el("ramTotal").textContent = "4.0";
      el("ramUsed").textContent = (4.0 * ram/100).toFixed(1);
      const rs = percentState(ram);
      setSeverity(ramHex, rs.sev);

      // load
      const load = clamp((cpu/100)*2.2 + Math.random()*0.35, 0.05, 3.5);
      el("loadAvg").textContent = load.toFixed(2);

      // disks
      const sdP = clamp(22 + Math.random()*18, 5, 95);
      el("sdBar").style.width = `${sdP.toFixed(0)}%`;
      el("sdText").textContent = `USED ${(58.3*sdP/100).toFixed(1)} / 58.3 GB (${sdP.toFixed(0)}%)`;
      setSeverity(sdHex, storageState(sdP).sev);

      const hddP = clamp(18 + Math.random()*10, 2, 99);
      el("hddBar").style.width = `${hddP.toFixed(0)}%`;
      el("hddText").textContent = `USED ${(1000*hddP/100).toFixed(0)} / 1000 GB (${hddP.toFixed(0)}%)`;
      setSeverity(hddHex, storageState(hddP).sev);

      // services
      maybeFlipServices();
      el("svcDenpo").textContent = services.denpo.label;
      el("svcCloud").textContent = services.cloud.label;

      const anyDown = (services.denpo.state === "inactive") || (services.cloud.state === "inactive");
      const anyRestart = (services.denpo.state === "restarting") || (services.cloud.state === "restarting");
      if(anyDown) setSeverity(svcHex, "warn");
      else if(anyRestart) setSeverity(svcHex, "caution");
      else setSeverity(svcHex, "ok");

      requestAnimationFrame(tick);
    }

    // init
    setSeverity(tempHex, "ok");
    setSeverity(cpuHex, "ok");
    setSeverity(ramHex, "ok");
    setSeverity(svcHex, "ok");
    setSeverity(sdHex, "ok");
    setSeverity(hddHex, "ok");
    requestAnimationFrame(tick);
  </script>
</body>
</html>
