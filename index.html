<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>GOJA UI TUNER (Square)</title>

  <!-- Fonts: 数字=デジタル/日本語=明朝寄り -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700;900&family=Noto+Serif+JP:wght@700;900&display=swap" rel="stylesheet">

  <style>
    :root{
      /* ===== Theme ===== */
      --bg: #000000;
      --gold: #f2b400;            /* エヴァ寄りの黄 */
      --gold-dim: rgba(242,180,0,.55);

      /* ===== Card sizing ===== */
      --cardW: min(94vw, 560px);
      --cardRadius: 28px;

      /* ===== Inner frame sizing ===== */
      --frameInsetOuter: 18px;
      --frameInsetInner: 38px;
      --frameStrokeOuter: 6px;
      --frameStrokeInner: 4px;

      /* ===== Tunable (defaults) ===== */
      --titleY: 0px;
      --numY: 0px;
      --dashY: 0px;
      --statusY: 0px;

      --titleSize: 26px;
      --numSize: 96px;
      --unitSize: 20px;
      --statusSize: 22px;

      --dashW: 62%;   /* 点線の長さ（カード幅に対する割合） */
      --dashThick: 4px;
      --dashGap: 10px;
    }

    html, body {
      height: 100%;
      margin: 0;
      background: var(--bg);
      color: #fff;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }

    body{
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      padding: 18px 14px calc(18px + env(safe-area-inset-bottom));
      gap: 14px;
      overflow-x: hidden;
    }

    /* ===== "あなたに伝える" 指示テキスト（見やすい位置） ===== */
    .note{
      width: var(--cardW);
      max-width: var(--cardW);
      color: rgba(255,255,255,.78);
      font-size: 12.5px;
      line-height: 1.35;
      letter-spacing: .02em;
      text-align: left;
      padding: 10px 12px;
      border-radius: 14px;
      background: rgba(255,255,255,.06);
      border: 1px solid rgba(255,255,255,.08);
    }
    .note b{ color: #fff; }

    /* ===== Card container ===== */
    .card-wrap{
      width: var(--cardW);
      border-radius: var(--cardRadius);
      background: rgba(255,255,255,.06);
      padding: 16px;
      box-shadow:
        0 18px 50px rgba(0,0,0,.65),
        inset 0 0 0 1px rgba(255,255,255,.04);
    }

    /* ===== Square card (歪まない) ===== */
    .card{
      width: 100%;
      aspect-ratio: 1 / 1; /* ←ここが“縦長”を殺す */
      border-radius: calc(var(--cardRadius) - 6px);
      background: #000;
      position: relative;
      overflow: hidden;
    }

    /* Outer frame */
    .card::before{
      content:"";
      position:absolute;
      inset: var(--frameInsetOuter);
      border-radius: 22px;
      border: var(--frameStrokeOuter) solid var(--gold);
      box-shadow: 0 0 0 1px rgba(0,0,0,.35);
      pointer-events:none;
    }

    /* Inner frame */
    .card::after{
      content:"";
      position:absolute;
      inset: var(--frameInsetInner);
      border-radius: 18px;
      border: var(--frameStrokeInner) solid rgba(242,180,0,.55);
      pointer-events:none;
    }

    /* ===== Content ===== */
    .title{
      position:absolute;
      top: calc(18% + var(--titleY));
      left: 50%;
      transform: translateX(-50%);
      font-family: "Noto Serif JP", serif;
      font-weight: 900;
      font-size: var(--titleSize);
      letter-spacing: .08em;
      color: var(--gold);
      text-shadow: 0 2px 10px rgba(242,180,0,.15);
      white-space: nowrap;
      user-select:none;
    }

    .value{
      position:absolute;
      top: calc(40% + var(--numY));
      left: 50%;
      transform: translateX(-50%);
      display:flex;
      align-items: baseline;
      gap: 10px;
      user-select:none;
    }
    .num{
      font-family: "Orbitron", system-ui, sans-serif;
      font-weight: 900;
      font-size: var(--numSize);
      letter-spacing: .02em;
      color: var(--gold);
      line-height: 1;
      text-shadow: 0 3px 16px rgba(242,180,0,.12);
    }
    .unit{
      font-family: "Orbitron", system-ui, sans-serif;
      font-weight: 700;
      font-size: var(--unitSize);
      color: rgba(255,255,255,.62);
      letter-spacing: .05em;
      transform: translateY(-4px);
    }

    .dash{
      position:absolute;
      top: calc(63% + var(--dashY));
      left: 50%;
      transform: translateX(-50%);
      width: var(--dashW);
      height: 0;
      border-top: var(--dashThick) dashed rgba(242,180,0,.35);
      /* dashの見た目を少し整える */
      filter: drop-shadow(0 1px 0 rgba(0,0,0,.35));
      user-select:none;
    }

    .status{
      position:absolute;
      top: calc(71% + var(--statusY));
      left: 50%;
      transform: translateX(-50%);
      font-family: "Noto Serif JP", serif;
      font-weight: 900;
      font-size: var(--statusSize);
      letter-spacing: .10em;
      color: rgba(242,180,0,.82);
      white-space: nowrap;
      user-select:none;
    }

    /* ===== Bottom control bar (透明・小さめ) ===== */
    .panel{
      width: var(--cardW);
      border-radius: 18px;
      background: rgba(0,0,0,.25);     /* スケスケ */
      border: 1px solid rgba(255,255,255,.10);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      overflow: hidden;
    }

    .panel-head{
      display:flex;
      align-items:center;
      justify-content: space-between;
      padding: 12px 12px;
      gap: 10px;
    }

    .panel-title{
      font-size: 12.5px;
      letter-spacing: .04em;
      color: rgba(255,255,255,.80);
      user-select:none;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .btn{
      appearance:none;
      border: 1px solid rgba(255,255,255,.16);
      background: rgba(255,255,255,.08);
      color: rgba(255,255,255,.88);
      padding: 8px 12px;
      border-radius: 14px;
      font-size: 12.5px;
      letter-spacing: .08em;
      cursor: pointer;
      user-select:none;
    }
    .btn:active{ transform: translateY(1px); }

    .panel-body{
      padding: 8px 12px 12px;
      display: none;
    }
    .panel.open .panel-body{ display:block; }

    .row{
      display:grid;
      grid-template-columns: 1fr auto;
      align-items:center;
      gap: 10px;
      padding: 8px 0;
    }
    .label{
      font-size: 12px;
      color: rgba(255,255,255,.78);
      letter-spacing: .04em;
      user-select:none;
    }
    .val{
      font-family: "Orbitron", system-ui, sans-serif;
      font-size: 11px;
      color: rgba(255,255,255,.66);
      letter-spacing: .06em;
      user-select:none;
      min-width: 66px;
      text-align: right;
    }

    input[type="range"]{
      width: 100%;
      accent-color: var(--gold);
      height: 28px;
      background: transparent;
    }

    .actions{
      display:flex;
      gap: 10px;
      margin-top: 10px;
    }
    .btn-wide{
      flex:1;
      padding: 10px 12px;
      border-radius: 16px;
      font-weight: 700;
    }

    /* ===== Tiny toast ===== */
    .toast{
      position: fixed;
      bottom: calc(14px + env(safe-area-inset-bottom));
      left: 50%;
      transform: translateX(-50%);
      padding: 10px 12px;
      border-radius: 14px;
      background: rgba(0,0,0,.55);
      border: 1px solid rgba(255,255,255,.12);
      color: rgba(255,255,255,.9);
      font-size: 12px;
      letter-spacing: .06em;
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      display:none;
      z-index: 9999;
    }
    .toast.show{ display:block; }

    /* iOS: selection */
    *{ -webkit-tap-highlight-color: transparent; }
  </style>
</head>

<body>

  <div class="note">
    <b>使い方：</b>下の <b>SHOW</b> → スライダーで位置/サイズ/点線長さを合わせる → <b>COPY</b> を押して値を送ってくれ。<br>
    （※背景は真っ黒固定。カードは正方形＝歪まない。）
  </div>

  <div class="card-wrap">
    <div class="card" id="card">
      <div class="title" id="title">メモリ稼働率</div>

      <div class="value" id="value">
        <div class="num" id="num">60</div>
        <div class="unit" id="unit">%</div>
      </div>

      <div class="dash" id="dash"></div>

      <div class="status" id="status">稼働状態：通常</div>
    </div>
  </div>

  <div class="panel" id="panel">
    <div class="panel-head">
      <div class="panel-title">位置調整（縦）＋文字サイズ＋点線長さ</div>
      <button class="btn" id="toggleBtn">SHOW</button>
    </div>

    <div class="panel-body">

      <!-- ===== Y offsets ===== -->
      <div class="row">
        <div class="label">題目 Y（px）</div><div class="val" id="vTitleY">0</div>
      </div>
      <input id="sTitleY" type="range" min="-120" max="120" value="0" />

      <div class="row">
        <div class="label">数字 Y（px）</div><div class="val" id="vNumY">0</div>
      </div>
      <input id="sNumY" type="range" min="-140" max="140" value="0" />

      <div class="row">
        <div class="label">点線 Y（px）</div><div class="val" id="vDashY">0</div>
      </div>
      <input id="sDashY" type="range" min="-140" max="140" value="0" />

      <div class="row">
        <div class="label">稼働状態 Y（px）</div><div class="val" id="vStatusY">0</div>
      </div>
      <input id="sStatusY" type="range" min="-140" max="140" value="0" />

      <!-- ===== Font sizes ===== -->
      <div class="row">
        <div class="label">題目 サイズ（px）</div><div class="val" id="vTitleSize">26</div>
      </div>
      <input id="sTitleSize" type="range" min="14" max="44" value="26" />

      <div class="row">
        <div class="label">数字 サイズ（px）</div><div class="val" id="vNumSize">96</div>
      </div>
      <input id="sNumSize" type="range" min="54" max="140" value="96" />

      <div class="row">
        <div class="label">単位 サイズ（px）</div><div class="val" id="vUnitSize">20</div>
      </div>
      <input id="sUnitSize" type="range" min="12" max="34" value="20" />

      <div class="row">
        <div class="label">稼働状態 サイズ（px）</div><div class="val" id="vStatusSize">22</div>
      </div>
      <input id="sStatusSize" type="range" min="12" max="36" value="22" />

      <!-- ===== Dash length ===== -->
      <div class="row">
        <div class="label">点線 長さ（%）</div><div class="val" id="vDashW">62%</div>
      </div>
      <input id="sDashW" type="range" min="30" max="92" value="62" />

      <div class="actions">
        <button class="btn btn-wide" id="copyBtn">COPY</button>
        <button class="btn btn-wide" id="resetBtn">RESET</button>
      </div>

    </div>
  </div>

  <div class="toast" id="toast">コピーした</div>

  <script>
    const root = document.documentElement;

    const panel = document.getElementById("panel");
    const toggleBtn = document.getElementById("toggleBtn");

    toggleBtn.addEventListener("click", () => {
      const open = panel.classList.toggle("open");
      toggleBtn.textContent = open ? "HIDE" : "SHOW";
    });

    const DEFAULTS = {
      titleY: 0, numY: 0, dashY: 0, statusY: 0,
      titleSize: 26, numSize: 96, unitSize: 20, statusSize: 22,
      dashW: 62
    };

    const binds = [
      {slider:"sTitleY",   out:"vTitleY",   css:"--titleY",   unit:"px"},
      {slider:"sNumY",     out:"vNumY",     css:"--numY",     unit:"px"},
      {slider:"sDashY",    out:"vDashY",    css:"--dashY",    unit:"px"},
      {slider:"sStatusY",  out:"vStatusY",  css:"--statusY",  unit:"px"},

      {slider:"sTitleSize",  out:"vTitleSize",  css:"--titleSize",  unit:"px"},
      {slider:"sNumSize",    out:"vNumSize",    css:"--numSize",    unit:"px"},
      {slider:"sUnitSize",   out:"vUnitSize",   css:"--unitSize",   unit:"px"},
      {slider:"sStatusSize", out:"vStatusSize", css:"--statusSize", unit:"px"},

      {slider:"sDashW",    out:"vDashW",    css:"--dashW",    unit:"%"},
    ];

    function setVar(varName, value, unit){
      root.style.setProperty(varName, `${value}${unit}`);
    }

    function init(){
      // set defaults
      for(const b of binds){
        const s = document.getElementById(b.slider);
        const o = document.getElementById(b.out);
        const key = b.css.replace("--","");

        const dv = DEFAULTS[key];
        s.value = dv;
        if(b.unit === "%"){
          o.textContent = `${dv}%`;
          setVar(b.css, dv, "%");
        }else{
          o.textContent = `${dv}`;
          setVar(b.css, dv, "px");
        }

        s.addEventListener("input", () => {
          const v = Number(s.value);
          if(b.unit === "%"){
            o.textContent = `${v}%`;
            setVar(b.css, v, "%");
          }else{
            o.textContent = `${v}`;
            setVar(b.css, v, "px");
          }
        });
      }
    }

    const toast = document.getElementById("toast");
    function showToast(msg){
      toast.textContent = msg;
      toast.classList.add("show");
      clearTimeout(showToast._t);
      showToast._t = setTimeout(()=>toast.classList.remove("show"), 900);
    }

    document.getElementById("copyBtn").addEventListener("click", async () => {
      const get = (id) => Number(document.getElementById(id).value);

      const payload = {
        titleY: get("sTitleY"),
        numY: get("sNumY"),
        dashY: get("sDashY"),
        statusY: get("sStatusY"),
        titleSize: get("sTitleSize"),
        numSize: get("sNumSize"),
        unitSize: get("sUnitSize"),
        statusSize: get("sStatusSize"),
        dashW: get("sDashW")
      };

      try{
        await navigator.clipboard.writeText(JSON.stringify(payload, null, 2));
        showToast("コピーした（JSON）");
      }catch(e){
        // fallback
        const ta = document.createElement("textarea");
        ta.value = JSON.stringify(payload, null, 2);
        document.body.appendChild(ta);
        ta.select();
        document.execCommand("copy");
        ta.remove();
        showToast("コピーした（fallback）");
      }
    });

    document.getElementById("resetBtn").addEventListener("click", () => {
      for(const b of binds){
        const s = document.getElementById(b.slider);
        const key = b.css.replace("--","");
        s.value = DEFAULTS[key];
        s.dispatchEvent(new Event("input"));
      }
      showToast("リセットした");
    });

    init();
  </script>
</body>
</html>